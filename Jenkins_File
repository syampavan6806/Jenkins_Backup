pipeline{
    agent any

    stages{
        stage('git checkout'){
            steps{
               git credentialsId: 'GitHub_Pwd', url: 'https://github.com/syampavan6806/Jenkins_Backup.git'
            }
        }
        stage('jenkins_backup'){
            steps{
              sh  '''
		   JENKINS_HOME="/var/lib/jenkins"
		   BACKUP_DIR="/opt/jenkins_backups"
		   DATE=$(date +%F-%H-%M)
		   BACKUP_FILE="jenkins_backup_$DATE.tar.gz"
		   sudo chown -R jenkins:jenkins "$BACKUP_DIR"
		   chmod 777 -R "$BACKUP_DIR"
		   mkdir -p "$BACKUP_DIR"
		   sudo tar -czf "${BACKUP_DIR}/$BACKUP_FILE" -C "${JENKINS_HOME}" .
                
                '''
            }
        }
    }stages closing
}//pipeline closing
